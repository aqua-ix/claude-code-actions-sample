# Claude Code Actions サンプルプロジェクト

このドキュメントは、Claude Code Actionsがこのプロジェクトで作業する際の指針となります。

## プロジェクト概要

シンプルなTodoアプリケーション（Node.js + Express + SQLite）で、Claude Code Actionsの使い方をデモンストレーションします。

## 技術スタック

- **バックエンド**: Node.js 18+, Express
- **データベース**: better-sqlite3
- **フロントエンド**: バニラJavaScript, HTML, CSS
- **テスト**: シンプルなNode.jsテストスクリプト

## コーディング規約

### JavaScript

- **スタイル**: セミコロンを使用、インデントは2スペース
- **命名規則**:
  - 変数・関数: `camelCase`
  - 定数: `UPPER_CASE`
  - ファイル名: `kebab-case.js`
- **非同期処理**: async/awaitを優先（Promiseチェーンは避ける）
- **エラーハンドリング**: 適切なHTTPステータスコードとエラーメッセージを返す

### データベース

- **SQLite**: better-sqlite3を使用（同期API）
- **テーブル**: スネークケース（`created_at`, `user_id`など）
- **クエリ**: Prepared Statementsを使用してSQLインジェクションを防止

### API設計

- **RESTful**: 標準的なHTTPメソッド（GET, POST, PUT, DELETE）を使用
- **レスポンス形式**: JSON
- **エラーレスポンス**: `{ error: "エラーメッセージ" }` の形式
- **ステータスコード**:
  - 200: 成功
  - 201: 作成成功
  - 204: 削除成功（レスポンスボディなし）
  - 400: バリデーションエラー
  - 404: リソースが見つからない
  - 500: サーバーエラー

## コードレビュー基準

Claude Code Actionsがコードレビューを行う際は、以下の点を確認してください:

### セキュリティ

- [ ] SQLインジェクション対策（Prepared Statements使用）
- [ ] XSS対策（HTMLエスケープ処理）
- [ ] 入力値のバリデーション
- [ ] 機密情報のハードコード禁止

### コード品質

- [ ] 関数は単一責任の原則に従っているか
- [ ] 適切なエラーハンドリングがあるか
- [ ] コードの重複がないか
- [ ] 変数名が分かりやすいか

### パフォーマンス

- [ ] 不必要なデータベースクエリがないか
- [ ] N+1問題がないか
- [ ] 適切なインデックスが設定されているか（将来の拡張時）

### テスト

- [ ] 新機能には対応するテストがあるか
- [ ] 既存のテストが通過するか
- [ ] エッジケースのテストがあるか

## 機能追加のガイドライン

新機能を追加する際は:

1. **データベース変更**: 必要に応じて`database.js`でマイグレーションスクリプトを追加
2. **APIエンドポイント**: `server.js`に追加（将来的には`routes/`に分離を検討）
3. **フロントエンド**: `public/index.html`を更新
4. **テスト**: `test.js`に対応するテストケースを追加
5. **ドキュメント**: README.mdを更新

## よくある機能リクエスト

以下は、GitHub Issueで@claudeに依頼できる機能の例です:

- タスクの優先度設定
- タスクの期限設定
- タスクのカテゴリ/タグ機能
- タスクの検索・フィルタリング
- ユーザー認証
- マルチユーザー対応
- タスクのソート機能

## デプロイ

現時点ではローカル開発のみを想定していますが、将来的には以下を検討:

- Docker化
- Heroku/Render/Flyなどへのデプロイ
- 環境変数の管理（.env）

## 連絡先・サポート

質問やバグ報告はGitHub Issuesで@claudeにメンションしてください。
